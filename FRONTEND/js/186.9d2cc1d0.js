"use strict";(self["webpackChunke_learning"]=self["webpackChunke_learning"]||[]).push([[186],{1845:function(e,s,t){t.r(s),t.d(s,{default:function(){return ne}});var n=t(6252),i=t(9963),o=t(3577),c=t(8563),r=t(6813);const a=e=>((0,n.dD)("data-v-47cdb4c3"),e=e(),(0,n.Cn)(),e),l={style:{height:"calc(100vh - 17px)"}},d={class:"container position-relative"},u={class:"process mt-3"},h=a((()=>(0,n._)("div",{class:"process-bar"},[(0,n._)("div",{class:"process-bar-done"})],-1))),k={key:0,class:"play-content"},p={class:"finish"},w={class:"finish-container"},g=a((()=>(0,n._)("div",{class:"finish-header"},[(0,n._)("img",{src:c,alt:""})],-1))),b={class:"finish-content"},S=a((()=>(0,n._)("img",{src:r,alt:""},null,-1))),m={class:"footer position-absolute bottom-0"},v={class:"default container d-flex justify-content-between align-items-center",style:{padding:"0 100px"}},C={class:"result d-none"},x={key:0,class:"accurate d-flex align-items-center"},f=a((()=>(0,n._)("div",{class:"img-accurate d-flex justify-content-center align-items-center"},[(0,n._)("div",{class:"icon icon-accurate"})],-1))),y=a((()=>(0,n._)("div",{class:"accurate-notify d-flex align-items-center fs-4 fw-bold ms-3",style:{color:"#58A700"}}," Chính xác!",-1))),_=[f,y],q={key:1,class:"inaccurate d-flex align-items-center"},Q=a((()=>(0,n._)("div",{class:"img-inaccurate d-flex justify-content-center align-items-center"},[(0,n._)("div",{class:"icon icon-inaccurate"})],-1))),L={class:"inaccurate-notify ms-3"},W=a((()=>(0,n._)("div",{class:"correct-text fw-bold fs-4",style:{color:"#ea2b2b"}}," Sai rồi! ",-1))),A={class:"correct-answer",style:{color:"#ea2b2b"}},$=a((()=>(0,n._)("div",{class:"my-btn"}," Bỏ qua ",-1))),F=[$],T={key:0,class:"switch-input-wrapper d-flex align-items-center"},H=a((()=>(0,n._)("div",{class:"icon-keyboard me-3"},null,-1))),D=(0,n.Uk)(" SỬ DỤNG BÀN PHÍM "),U=[H,D],Z={key:1,class:"switch-input-wrapper d-flex align-items-center"},j=a((()=>(0,n._)("div",{class:"icon-word-bank me-3"},null,-1))),I=(0,n.Uk)(" SỬ DỤNG KHO TỪ VỰNG "),M=[j,I],N=a((()=>(0,n._)("div",{class:"my-btn"}," Kiểm tra ",-1))),O=[N];function E(e,s,t,c,r,a){const f=(0,n.up)("Loading"),y=(0,n.up)("QuesMultiWords"),$=(0,n.up)("QuesSelectHorizon"),H=(0,n.up)("QuesSelectPair"),D=(0,n.up)("QuesHearSelect"),j=(0,n.up)("QuesHearSelectMulti"),I=(0,n.up)("QuesSpeak");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.wy)((0,n.Wm)(f,null,null,512),[[i.F8,r.isShowLoading]]),(0,n._)("div",l,[(0,n._)("div",d,[(0,n._)("div",u,[(0,n._)("div",{class:"icon icon-cancel me-3",onClick:s[0]||(s[0]=(...e)=>a.backAction&&a.backAction(...e))}),h]),r.questions&&r.questions.length>0?((0,n.wg)(),(0,n.iD)("div",k,[0==r.indexQues?((0,n.wg)(),(0,n.j4)(y,{key:0,question:r.questions[0],toggleSwitch:r.toggleSwitch,onSpeakWord:a.speakWord,onOnEnterTextArea:a.btnCheckSelectedWord},null,8,["question","toggleSwitch","onSpeakWord","onOnEnterTextArea"])):(0,n.kq)("",!0),1==r.indexQues?((0,n.wg)(),(0,n.j4)($,{key:1,question:r.questions[1],onSpeakWord:a.speakWord},null,8,["question","onSpeakWord"])):(0,n.kq)("",!0),2==r.indexQues?((0,n.wg)(),(0,n.j4)(H,{key:2,question:r.questions[2],onSpeakWord:a.speakWord,onCheckAnswer:a.checkAnswer},null,8,["question","onSpeakWord","onCheckAnswer"])):(0,n.kq)("",!0),3==r.indexQues?((0,n.wg)(),(0,n.j4)(D,{key:3,question:r.questions[3],onSpeakWord:a.speakWord},null,8,["question","onSpeakWord"])):(0,n.kq)("",!0),4==r.indexQues?((0,n.wg)(),(0,n.j4)(j,{key:4,question:r.questions[4],toggleSwitch:r.toggleSwitch,onSpeakWord:a.speakWord,onOnEnterTextArea:a.btnCheckSelectedWord},null,8,["question","toggleSwitch","onSpeakWord","onOnEnterTextArea"])):(0,n.kq)("",!0),5==r.indexQues?((0,n.wg)(),(0,n.j4)(I,{key:5,question:r.questions[5],onSpeakWord:a.speakWord},null,8,["question","onSpeakWord"])):(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n.wy)((0,n._)("div",p,[(0,n._)("div",w,[g,(0,n._)("div",b,[(0,n._)("h3",null,"Số câu đúng "+(0,o.zw)(r.numberCorrect)+"/6",1),S])])],512),[[i.F8,r.isShowFinish]])]),(0,n._)("div",m,[(0,n._)("div",v,[(0,n._)("div",C,[r.correctAll?((0,n.wg)(),(0,n.iD)("div",x,_)):((0,n.wg)(),(0,n.iD)("div",q,[Q,(0,n._)("div",L,[W,(0,n._)("div",A," Đáp án: "+(0,o.zw)(r.questions[r.indexQues].answer),1)])]))]),(0,n._)("div",{class:"my-btn-wrapper skip-btn",onClick:s[1]||(s[1]=(...e)=>a.skipClick&&a.skipClick(...e))},F),(0,n.wy)((0,n._)("div",{class:"switch-input fs-5",onClick:s[2]||(s[2]=e=>r.toggleSwitch=!r.toggleSwitch)},[r.toggleSwitch?((0,n.wg)(),(0,n.iD)("div",T,U)):((0,n.wg)(),(0,n.iD)("div",Z,M))],512),[[i.F8,r.questions[r.indexQues]&&r.questions[r.indexQues].is_show_switch]]),(0,n._)("div",{class:"my-btn-wrapper check-btn",onClick:s[3]||(s[3]=(...e)=>a.btnCheckSelectedWord&&a.btnCheckSelectedWord(...e))},O)])])])],64)}var z=t(9755),G=t.n(z),K=t(4871),P=t(1055),B=t(1111),V=t(9549),J=t(7459),R=t(8583),Y=t(738),X=t(5672),ee={components:{QuesMultiWords:P.Z,QuesSelectHorizon:B.Z,QuesSelectPair:V.Z,QuesHearSelect:J.Z,QuesHearSelectMulti:R.Z,QuesSpeak:Y.Z,Loading:X.Z},beforeMount(){this.getLessonQuestions(this.$store.getters["AUTH/currentLessonId"])},data(){return{isShowLoading:!0,indexQues:0,numberCorrect:0,streakCorrect:0,lang_:"en-US",toggleSwitch:!0,correctAll:null,correct:0,questions:[],isShowFinish:!1}},methods:{speakWord(e,s,t){if("EN"==s){this.lang_="en-US",window.speechSynthesis.cancel();var n=window.speechSynthesis.getVoices(),i=new SpeechSynthesisUtterance;i.text=e,i.lang=this.lang_,i.voice=n[2],i.pitch=1.8,i.volume=1,t&&(i.rate=t),window.speechSynthesis.speak(i)}},btnCheckSelectedWord(){if(null==this.correctAll){let s="";switch(this.indexQues){case 0:case 4:if(this.toggleSwitch){let e=G()(".selected-words").children(),t=[];for(let s=0;s<e.length;s++)t.push(e[s].innerText.toLocaleLowerCase());s=t.join(" ")}else s=G()(".answer-area textarea").val(),s=s.trim().toLocaleLowerCase();var e=s==this.questions[this.indexQues].answer.toLocaleLowerCase();this.checkAnswer(e);break;case 1:case 3:s=G()(".word-wrapper.selected").text().trim().toLocaleLowerCase(),e=s==this.questions[this.indexQues].answer.toLocaleLowerCase(),this.checkAnswer(e);break;case 2:break;case 5:s=G()(".text-speech").text().trim().toLocaleLowerCase(),e=s==`${this.questions[this.indexQues].answer.toLocaleLowerCase()}.`,this.checkAnswer(e);break}}else this.isShowFinish?(this.isShowFinish=!1,this.isShowLoading=!0,this.updateData()):5==this.indexQues?(this.resetFooter(),G()(".check-btn .my-btn").text("Tiếp tục"),this.isShowFinish=!0):(this.indexQues++,this.correctAll=null,this.resetFooter())},skipClick(){this.checkAnswer(null)},resetFooter(){G()(".selected-words").empty(),G()(".answer-area textarea").val(""),G()(".footer").removeClass("correct"),G()(".footer").removeClass("incorrect"),G()(".check-btn").css("background","#3d8d00"),G()(".check-btn > .my-btn").css("background","#58CC02"),G()(".result").addClass("d-none"),G()(".skip-btn").removeClass("d-none"),G()(".check-btn .my-btn").text("Kiểm tra")},correctFooter(){G()(".footer").removeClass("incorrect"),G()(".footer").addClass("correct"),G()(".skip-btn").addClass("d-none"),G()(".check-btn").css("background","#3d8d00"),G()(".check-btn > .my-btn").css("background","#58CC02")},inCorrectFooter(){G()(".skip-btn").addClass("d-none"),G()(".check-btn").css("background","#a10e0a"),G()(".check-btn > .my-btn").css("background","#ea2b2b"),G()(".footer").removeClass("correct"),G()(".footer").addClass("incorrect")},checkAnswer(e){1==e?(this.correctAll=!0,this.numberCorrect++,this.streakCorrect++,this.correctFooter()):(this.correctAll=!1,this.streakCorrect=0,this.inCorrectFooter()),G()(".result").removeClass("d-none"),G()(".check-btn .my-btn").text("Tiếp tục")},backAction(){this.$router.push("/home")},getLessonQuestions(e){let s=this;this.axios.get(`${K.Z}api/Lesson/QuestionRand?lessonid=${e}`).then((e=>{if(e.data&&e.data.length>0){let t=e.data.map((e=>JSON.parse(e.content.toString())));t=t.sort(((e,s)=>e.id-s.id)),s.questions=t,setTimeout((()=>{s.isShowLoading=!1}),1e3)}})).catch((e=>{console.log(e)}))},updateData(){let e=this,s=this.$store.getters["AUTH/userId"],t=this.$route.params.idLesson,n=t==5*this.$route.params.currentTopicId-1?5:0;this.$store.dispatch("AUTH/setGem",n),this.axios.post(`${K.Z}api/Lesson/Word?userId=${s}&lessonId=${t}`).then((e=>{e.data&&console.log(e.data)})),this.axios.put(`${K.Z}api/Users/UpdateUserLesson?userId=${s}&point=${this.numberCorrect}&gem=${n}`).then((s=>{s.data&&setTimeout((()=>{e.isShowLoading=!1,this.$router.push({name:"Home",params:{isFinish:!0}})}),1e3)}))}},watch:{toggleSwitch:function(e){0==e&&this.$nextTick((function(){G()("textarea").focus()}))},indexQues:function(e){const s=this.questions.length;G()(".process-bar-done").css("width",e/s*100+"%")}}},se=t(3744);const te=(0,se.Z)(ee,[["render",E],["__scopeId","data-v-47cdb4c3"]]);var ne=te}}]);
//# sourceMappingURL=186.9d2cc1d0.js.map